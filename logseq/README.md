# Logseq 知識工作者增強系統 (Knowledge Worker Enhancement System)

本系統透過 `custom.js` 與 `custom.css` 協作，為 Logseq 提供高效的標籤視覺化與行內染色功能，特別針對大量寫作與巢狀引用進行了優化。

---

## 1. 區塊等級標籤 (Block-level Tags)

用於定義知識庫中的「分類標籤」區塊。

*   **語法**：在區塊開頭輸入 `++/標籤名`。
*   **效果**：當該區塊被引用（Reference）時，引用處會顯示為 **橘色圓角膠囊**。
*   **優點**：
    *   **自動過濾巢狀引用**：如果你引用了一個「包含標籤引用的區塊」，只有最內層的標籤會變色，父層引用會維持一般文字外觀，防止視覺混亂。
    *   **點擊導航**：點擊膠囊可直接跳轉至原始標籤區塊。

---

## 2. 結構化行內染色 (Inline Coloring)

用於在段落中快速標註重點，取代麻煩的 HTML 標籤。

### 語法 A：文字染色 (Text Color)
*   **格式**：`??t/顏色縮寫或色號:你的文字??`
*   **範例**：`??t/r:重要重點??`

### 語法 B：背景染色 (Background Color)
*   **格式**：`??b/顏色縮寫或色號:你的文字??`
*   **範例**：`??b/y:螢光筆劃記??`

### 核心特點：
*   **絕對不換行**：採用純 Span 渲染並強制行內佈局，即便在區塊引用內，也絕對不會發生斷行或換行問題。
*   **自動補全色號**：輸入 3 或 6 位英數（如 `6366f1`）會自動補上 `#` 號。
*   **醒目配對**：背景模式 (`b/`) 會根據底色自動配對最高對比的文字顏色（如紅底配白字）。

---

## 3. 顏色縮寫對照表 (Color Shortcuts)

您可以在語法中使用以下縮寫來快速調用預設配色：

| 縮寫 | 顏色名稱 | 文字色範例 (t/) | 背景色範例 (b/) |
| :-- | :--- | :--- | :--- |
| **r** | 紅色 (Red) | 紅色字 | **白字紅底** |
| **o** | 橘色 (Orange) | 橘色字 | **白字橘底** |
| **y** | 黃色 (Yellow) | 黃色字 | **深字黃底** |
| **g** | 綠色 (Green) | 綠色字 | **白字綠底** |
| **t** | 蒂芬妮藍 (Teal) | 藍綠色字 | **白字藍綠底** |
| **s** | 天空藍 (Sky) | 天藍色字 | **白字天藍底** |
| **b** | 藍色 (Blue) | 藍色字 | **白字藍底** |
| **p** | 紫色 (Purple) | 紫色字 | **白字紫底** |
| **i** | 粉紅色 (Pink) | 粉色字 | **白字粉底** |
| **a** | 灰色 (Gray) | 灰色字 | **白字灰底** |
| **k** | 黑色 (Black) | - | **白字黑底** |

---

## 4. 維護與自定義 (Maintenance)

如果您想修改某個顏色的具體深淺，請編輯 `logseq/custom.css`：

1.  **修改色號**：找到頂部的 `:root` 區塊，修改對應變數（如 `--mark-red`）。
2.  **增加縮寫**：
    *   在 CSS 增加 `.ls-text-你的縮寫` 或 `.ls-bg-你的縮寫`。
    *   JS 會自動識別長度小於 2 的縮寫並嘗試匹配。

---

## 5. 技術規格

*   **掃描機制**：使用 `MutationObserver` 監控 DOM 變動，反應時間約 1 秒。
*   **效能優化**：內建 Debounce 防抖機制，大量輸入時不佔用 CPU。
*   **兼容性**：避開了 Logseq 的 `#` 與 `[[]]` 保留字，不產生多餘頁面檔。
